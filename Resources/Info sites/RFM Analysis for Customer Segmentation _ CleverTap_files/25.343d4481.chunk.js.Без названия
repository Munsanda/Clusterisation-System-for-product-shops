(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"2uLe":function(e,t,a){"use strict";var n=a("mj2O"),c=a.n(n),r=a("7SM1"),i=a("8Epr"),o=a("Hvhg"),s=a("ERkP"),l=a("uDfI"),u=a("vTYT"),b=a("7oto");t.a=function useSetPreviewHeight(){var e=Object(s.useRef)(null),t=Object(l.c)(function(e){return!!e.conversations.activeConversation}),a=Object(l.c)(o.b).showBranding,n=void 0!==a&&a,d=Object(i.a)().noPolicy,f=Object(l.c)(function(e){return e.session.gdpr}),m=f.hasConsent,p=f.declinedConsent,g=Object(s.useCallback)(function(){var e=0,t=!n&&d;return p&&(e+=40),t&&(e+=18),m||(e+=t?14:7),e},[p,m,d,n]),O=Object(s.useCallback)(function(){return e.current?e.current.clientHeight:200},[e]),j=Object(s.useCallback)(function(){var e=Object(r.a)(c.a.mark(function _callee(e){var a,n,r,i,o=arguments;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:if(a=o.length>1&&void 0!==o[1]&&o[1],!t||!m){c.next=3;break}return c.abrupt("return");case 3:n=g(),r=O(),i=e?"".concat(r+155-n,"px"):"0px",Object(b.a)({topic:"set-frame-height",message:{height:i,name:u.b.CHAT,transition:!0,transitionHeight:a}});case 7:case"end":return c.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),[t,m,g,O]),v=Object(s.useCallback)(Object(r.a)(c.a.mark(function _callee2(){var e;return c.a.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:e=O(),Object(b.a)({topic:"set-frame-height",message:{height:"".concat(e+80,"px"),name:u.b.SLIDER,transition:!0,transitionHeight:!1}});case 2:case"end":return t.stop()}},_callee2)})),[O]),h=Object(s.useCallback)(Object(r.a)(c.a.mark(function _callee3(){var e;return c.a.wrap(function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:e=O(),Object(b.a)({topic:"set-frame-height",message:{height:"".concat(e+35,"px"),name:u.b.EMAIL_CAPTURE,transition:!0,transitionHeight:!1}});case 2:case"end":return t.stop()}},_callee3)})),[O]);return{previewRef:e,setChatHeight:j,setSliderHeight:v,setEmailCaptureHeight:h}}},"8Epr":function(e,t,a){"use strict";var n=a("SFoa"),c=a("LVcX"),r=a("uDfI"),i=a("Nlet");t.a=function useResolvePrivacy(){var e=Object(r.c)(function(e){return Object(c.a)({},["embed","configuration","dataProtection"])(e)}),t=Object(i.c)().locale,a=function resolvePolicy(){if(!e.policies)return{};var a=Object(n.h)(),r=e.default||"en",i=a?Object(n.e)():t||r,o=a?e.policies[r]:e.policies[i]||{};return Object(c.a)(o,[i])(e.policies)}(),o=a.privacyPolicyLink,s=a.privacyPolicyLinkText,l=a.privacyPolicyAlwaysOn;return{privacyPolicyLink:o,privacyPolicyLinkText:s,noPolicy:!o||!s||!(void 0!==l&&l)}}},G5CQ:function(e,t,a){},Ldxc:function(e,t,a){"use strict";a.d(t,"b",function(){return b}),a.d(t,"a",function(){return d});var n=a("mj2O"),c=a.n(n),r=a("7SM1"),i=a("SsZN"),o=a("vjCh"),s=a("qixE"),l=a("6lNa"),u=a("0lfv"),b=function(){var e=Object(r.a)(c.a.mark(function _callee(e,t){return c.a.wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:try{Object(o.j)(t.id,t.playbookId),Object(s.a)(l.b.SUBMITTED),Object(s.a)(l.b.LEAD_CAPTURED,{email:e})}catch(n){Object(u.w)(["Failed to capture lead for email announcement playbook",n])}case 1:case"end":return a.stop()}},_callee)}));return function captureLeadForEmailAnnouncementPlaybook(t,a){return e.apply(this,arguments)}}(),d=function(){var e=Object(r.a)(c.a.mark(function _callee2(e){return c.a.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:try{Object(o.j)(e.id,e.playbookId),Object(i.c)(l.b.CLICKED,e.id),Object(s.a)(l.b.CLICKED)}catch(a){Object(u.w)(["Failed to capture CTA click for takeover playbook",a])}case 1:case"end":return t.stop()}},_callee2)}));return function captureCTAClickForAnnouncementPlaybook(t){return e.apply(this,arguments)}}()},LlKr:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a("vjCh"),c=a("7oto"),r=function removeActiveCampaignAndKillFrame(e,t,a){Object(c.a)({topic:"remove-active-campaign",message:{name:e}}),Object(c.b)(function(){return Object(n.j)(t,a)},e)}},LwEI:function(e,t,a){"use strict";var n=a("LVcX"),c=a("uDfI"),r=a("vTYT");t.a=function useWidgetAlignment(){return Object(c.c)(function(e){return Object(n.a)(r.a.RIGHT,["embed","configuration","theme","alignment"],e)})}},NJR1:function(e,t,a){},WjTm:function(e,t,a){"use strict";a.r(t);var n=a("mj2O"),c=a.n(n),r=a("7SM1"),i=a("s8DI"),o=a("nJ3u"),s=a("O94r"),l=a.n(s),u=a("Ztgx"),b=a("swFs"),d=a("+Kbs"),f=a("nQD+"),m=a("ab+K"),p=a("hSLT"),g=a("nvPd"),O=a("6wvX"),j=a("z24s"),v=a("Sn8X"),h=a("2uLe"),E=a("lE29"),y=a("LwEI"),w=a("SsZN"),k=a("Ldxc"),C=a("ERkP"),T=a.n(C),L=a("Tr4L"),I=a("vTYT"),R=a("6lNa"),S=function stripHtmlFromText(e){return e.replace(/<[^>]+>/g,"")},A=a("7oto"),P=a("LlKr"),x=(a("YiLf"),function EmailCaptureCampaign(){var e=Object(O.a)(),t=Object(h.a)(),a=t.previewRef,n=t.setEmailCaptureHeight,c=Object(L.a)().t,r=Object(C.useRef)(null),s=Object(j.a)(r),x=Object(C.useRef)(null),N=Object(j.a)(x),_=Object(C.useRef)(null),D=Object(E.a)(),M=D.activeColor,F=D.backgroundStyles,H=D.widgetBackgroundColor,U=Object(y.a)();Object(v.a)();var Y=function broadcastUpdatedEmail(e){Object(A.a)({topic:"plugin-action-dispatch",message:{action:"IDENTIFY_LEAD",payload:{email:e}}})};Object(C.useLayoutEffect)(function(){Object(A.a)({topic:"set-responsive-frame-width",message:{defaultWidth:400,name:I.b.EMAIL_CAPTURE}}),Object(A.a)({topic:"hide-frame-from-screen-reader",message:{name:I.b.CONTROLLER}})},[]);var K=Object(C.useState)(!1),J=Object(i.a)(K,2),B=J[0],Q=J[1],V=Object(C.useState)("72%"),X=Object(i.a)(V,2),Z=X[0],$=X[1],q=Object(p.a)(),W=Object(g.a)(""),z=Object(C.useMemo)(function(){return S(q.thanksMessage)},[q.thanksMessage]),G=Object(C.useMemo)(function(){return S(q.body)},[q.body]),ee=c("form.label.emailAddress"),te=c("form.label.submit"),ae="".concat(q.thanksTitle," ").concat(z),ne="".concat(q.title," ").concat(G),ce=B?ae:ne;Object(C.useLayoutEffect)(function(){n()},[q,n]),Object(C.useEffect)(function(){var e=a.current.offsetWidth-x.current.offsetWidth-55;$("".concat(e,"px"))},[te,a]),Object(C.useEffect)(function(){B&&a.current&&a.current.focus()},[B,a]);var re=function dismiss(){!function showControllerToScreenReaders(){Object(A.a)({topic:"show-frame-to-screen-reader",message:{name:I.b.CONTROLLER}})}(),Object(w.c)(R.b.DISMISSED,q.id),Object(P.a)(I.b.EMAIL_CAPTURE,q.id,q.playbookId)},ie=Object(C.useMemo)(function(){return B?{title:q.thanksTitle,body:q.thanksMessage}:{title:q.title,body:q.body}},[B,q.thanksTitle,q.thanksMessage,q.title,q.body]),oe=!W||""===W.value;return T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:l()("drift-widget-greeting drift-widget-email-capture drift-widget-email-capture--align-".concat(U),{"drift-widget-email-capture-mobile":e}),role:"region",ref:a},T.a.createElement(function CloseButton(e){return e.isMobile?T.a.createElement(T.a.Fragment,null,T.a.createElement("style",null,"\n            .drift-widget-email-capture-close-button.keyboard-focused svg {\n              ".concat(Object(o.d)(H,M),"\n            }\n          ")),T.a.createElement(f.a,{onClick:re,className:l()("drift-widget-email-capture-close-button",{"keyboard-focused":s}),"aria-label":"Close email announcement",ref:r},T.a.createElement(d.j,{className:"drift-widget-email-capture-close",width:16,height:16}))):T.a.createElement(m.a,{onClick:re})},{isMobile:e}),T.a.createElement(b.a,{style:F}),T.a.createElement(u.a,{senderIds:[q.senderId]}),T.a.createElement("div",{"aria-label":ce},T.a.createElement("h2",{className:"drift-widget-greeting-title"},ie.title),T.a.createElement("div",{className:"drift-widget-welcome-message-content"},T.a.createElement("div",{dangerouslySetInnerHTML:{__html:'\n                <p class="drift-welcome-message-content--body">\n                  '.concat(ie.body,"\n                </p>\n              ")}})),!B&&T.a.createElement("form",{className:"drift-widget-email-capture-form",onSubmit:function submitEmail(e){e.preventDefault(),Y(W.value),Q(!0),Object(k.b)(W.value,q)}},T.a.createElement("style",null,"\n              .drift-widget-email-submit.keyboard-focused {\n                ".concat(Object(o.d)(H,M),"\n              }\n            ")),T.a.createElement("input",Object.assign({ref:_,id:"drift-widget-email-capture-input",className:"drift-widget-email-capture-input",type:"email",required:!0,placeholder:ee,style:{width:Z}},W)),T.a.createElement("input",{type:"submit",ref:x,style:oe?{}:F,className:l()("drift-widget-email-submit",{"drift-widget-email-submit--disabled":oe,"keyboard-focused":N}),disabled:oe,value:te})))))}),N=a("QtlZ"),_=a("t72N"),D=a("LVcX"),M=a("uDfI"),F=a("0lfv"),H=a("VpmR"),U=a("rTkt"),Y=function EmailCapturePage(){var e=Object(C.useState)(!1),t=Object(i.a)(e,2),a=t[0],n=t[1],o=Object(M.c)(function(e){return e.view.initComplete}),s=Object(M.c)(function(e){return e.embed});return Object(C.useEffect)(function(){Object(_.a)(I.b.EMAIL_CAPTURE)},[]),Object(C.useEffect)(function(){o&&!a&&(Object(U.a)(s),Object(U.b)(s),function(){var e=Object(r.a)(c.a.mark(function _callee(){var e;return c.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(D.a)("en",["configuration","locale"],s),t.prev=1,t.next=4,Object(H.a)(e);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),Object(F.n)({data:["i18n failed to load - ".concat(t.t0.message),t.t0],type:"warn"});case 9:n(!0);case 10:case"end":return t.stop()}},_callee,null,[[1,6]])}));return function runAsync(){return e.apply(this,arguments)}}()())},[s,a,o]),o&&a?T.a.createElement(x,null):null};t.default=function(){return T.a.createElement(M.a,{store:N.a},T.a.createElement(Y,null))}},YiLf:function(e,t,a){},Ztgx:function(e,t,a){"use strict";var n=a("yEsl"),c=a("58kB"),r=a("i9gz"),i=a("weY7"),o=a("RhEL"),s=a("ERkP"),l=a.n(s),u=a("Tr4L"),b=a("uDfI"),d=a("F8vJ");a("oY6K");t.a=l.a.memo(function SenderInfo(e){var t=e.senderIds,a=e.messageText,o=void 0===a?null:a,f=Object(u.a)().t,m=Object(b.c)(function(e){return e.embed.configuration.organizationName}),p=Object(c.b)(t),g=Object(s.useMemo)(function(){var e;if(o)return o;if(t.length>1||Object(r.a)(p))return"";var a=null===(e=p[0])||void 0===e?void 0:e.recipient;if(!a||!a.name)return"";var n=!m||!m.length||Object(d.a)(m),c=!!m&&a.name.toLowerCase()===m.toLowerCase();return n||c?"".concat(a.name):f("header.senderInfo",{name:a.name,orgName:m})},[t.length,p,m,o,f]);return l.a.createElement("div",{className:"drift-widget-greeting-agent-header"},l.a.createElement("h1",{className:"drift-widget-greeting-recipient-name"},g),l.a.createElement(function Avatars(){return l.a.createElement(l.a.Fragment,null," ",Object(i.a)(function(e){return e.recipient?l.a.createElement(n.a,{key:e.recipient.id,id:e.recipient.id}):l.a.createElement(l.a.Fragment,null)},p))},null))},function propsAreEqual(e,t){return e.senderId===t.senderId&&e.messageText===t.messageText||Object(o.a)(e.senderIds,t.senderIds)&&e.messageText===t.messageText})},"ab+K":function(e,t,a){"use strict";var n=a("nJ3u"),c=a("O94r"),r=a.n(c),i=a("/UYI"),o=a("nQD+"),s=a("z24s"),l=a("lE29"),u=a("LwEI"),b=a("ERkP"),d=a.n(b);a("NJR1");t.a=function MessageCloseButton(e){var t=e.onClick,a=Object(u.a)(),c=Object(l.a)(),f=Object(b.useRef)(null),m=Object(s.a)(f);return d.a.createElement(d.a.Fragment,null,d.a.createElement("style",null,".drift-widget-message-close-button.keyboard-focused {\n          opacity: 1;\n        }\n        .drift-widget-message-close-button.keyboard-focused:before {\n          ".concat(Object(n.a)(c.activeColor,20,-3,-3),"\n        }\n        ")),d.a.createElement(o.a,{onClick:t,ref:f,className:r()("drift-widget-message-close-button","drift-widget-close-button--align-".concat(a),{"keyboard-focused":m}),"aria-label":"close"},d.a.createElement(i.a,{width:10,height:10})))}},hSLT:function(e,t,a){"use strict";var n=a("LVcX"),c=a("uDfI");t.a=function useActiveAnnouncementCampaign(){var e=Object(c.c)(function(e){return Object(n.a)({},["campaigns","activeCampaign"],e)}),t=e.attributes,a=void 0===t?{}:t;return{id:e.id,playbookId:Object(n.a)(null,["playbookId"],a),ctaType:Object(n.a)(null,["cta","CtaType"],a),ctaCopy:Object(n.a)("",["cta","copy"],a),ctaUrl:Object(n.a)("",["cta","UrlLink"],a),body:a.message||"",title:a.title||"",thanksTitle:a.thankYouHeadline||"",thanksMessage:a.thankYouMessage||"",senderId:a.senderId,type:a.campaignDisplayType}}},nvPd:function(e,t,a){"use strict";var n=a("s8DI"),c=a("ERkP");t.a=function useInputValue(e){var t=Object(c.useState)(e),a=Object(n.a)(t,2),r=a[0],i=a[1];return{value:r,onChange:Object(c.useCallback)(function(e){i(e.currentTarget.value)},[])}}},oY6K:function(e,t,a){},swFs:function(e,t,a){"use strict";var n=a("ERkP"),c=a.n(n);a("G5CQ");t.a=function TopLine(e){var t=e.style;return c.a.createElement("div",{className:"drift-widget-header-top-line",style:t})}},t72N:function(e,t,a){"use strict";var n=a("QtlZ"),c=a("7oto");t.a=function UseRequestStateSnapShot(e){Object(c.a)({topic:"request-state-snap-shot",message:{name:e}}),Object(c.c)({topic:"CONDUCTOR:state-snap-shot",handler:function handler(e){var t=e.data;n.a.dispatch({type:"REPLACE_STATE",payload:{currentState:t.state}})}})}}}]);